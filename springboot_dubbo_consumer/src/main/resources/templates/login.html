<!DOCTYPE html>
<!--[if IE 8 ]><html class="ie" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US"><!--<![endif]-->
<head>
	<!-- Basic Page Needs -->
	<meta charset="UTF-8">
	<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->
	<title>Techno Store - My Account</title>

	<meta name="author" content="CreativeLayers">

	<!-- Mobile Specific Metas -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- Boostrap style -->
	<link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.min.css">

	<!-- Theme style -->
	<link rel="stylesheet" type="text/css" href="/stylesheets/style.css">

	<!-- Reponsive -->
	<link rel="stylesheet" type="text/css" href="/stylesheets/responsive.css">

	<link rel="shortcut icon" href="/favicon/favicon.png">
	<style>
		body {
			background: url(/favicon/log.png);
			background-position: center center;
			background-repeat: no-repeat;
			background-attachment: fixed;
			background-size: cover;
		}
	</style>
</head>
<body class="row bg">

<!-- Javascript -->
<script type="text/javascript" src="/javascript/jquery.min.js"></script>
<script type="text/javascript" src="/javascript/tether.min.js"></script>
<script type="text/javascript" src="/javascript/bootstrap.min.js"></script>
<script type="text/javascript" src="/javascript/waypoints.min.js"></script>
<script type="text/javascript" src="/javascript/jquery.circlechart.js"></script>
<script type="text/javascript" src="/javascript/easing.js"></script>
<script type="text/javascript" src="/javascript/jquery.flexslider-min.js"></script>
<script type="text/javascript" src="/javascript/owl.carousel.js"></script>
<script type="text/javascript" src="/javascript/smoothscroll.js"></script>
<script type="text/javascript" src="/javascript/jquery-ui.js"></script>
<script type="text/javascript" src="/javascript/jquery.mCustomScrollbar.js"></script>
<script type="text/javascript" src="http://ditu.google.cn/maps/api/js?key=AIzaSyBtRmXKclfDp20TvfQnpgXSDPjut14x5wk&region=GB"></script>
<script type="text/javascript" src="/javascript/gmap3.min.js"></script>
<script type="text/javascript" src="/javascript/waves.min.js"></script>
<script type="text/javascript" src="/javascript/jquery.countdown.js"></script>
<script type="text/javascript" src="/javascript/main.js"></script>
<!--bootstarp弹框-->
<script type="text/javascript" src="/bootstrap-bootbox/bootbox.js"></script>

			<div class="container" style="margin-top: 50px">
				<div class="row" id="loginDiv">
					<div class="col-md-6">
						<!--这个容器市居右-->
					</div><!-- /.col-md-6 -->
					<div class="col-md-6">
						<div class="form-login">
							<div class="title">
								<h3>登录</h3>
							</div>
							<form id="loginForm" accept-charset="utf-8">
								<div class="form-box">
									<label for="name-login">手机号或邮箱</label>
									<input type="text" id="name-login" name="cmsUserName" placeholder="Ali">
								</div><!-- /.form-box -->
								<div class="form-box">
									<label for="password-login">密码 </label>
									<input type="text" id="password-login" name="cmsUserPwd" placeholder="******">
								</div><!-- /.form-box -->
								<div class="form-box checkbox">
									<input type="checkbox" id="remember" checked  name="remember">
									<label for="remember">记住密码</label>
								</div><!-- /.form-box -->
								<div class="form-box">
									<button type="button" onclick="loginCmsUser()" class="login">登录</button>
									<a href="#" title="">忘记密码？</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<a href="javascript:register()" title="">注册</a>
								</div><!-- /.form-box -->
							</form><!-- /#form-login -->
						</div><!-- /.form-login -->
					</div><!-- /.col-md-6 -->
				</div><!-- /.row -->
				<div class="row" id="registerDiv">
					<div class="col-md-6">
						<!--这个容器市居右-->
					</div><!-- /.col-md-6 -->
					<div class="col-md-6">
						<div class="form-login">
								<h3>注册</h3>
							<form id="registerForm" accept-charset="utf-8">
								<div class="form-box">
									<label for="name-login">手机号或邮箱</label>
									<input type="text" id="name-register" name="cmsUserName" placeholder="Ali" onblur="yzName()">
									<span id="nameId"></span>
								</div><!-- /.form-box -->
								<div class="form-box">
									<label for="password-login">密码 </label>
									<input type="text" id="password-register" name="cmsUserPwd" placeholder="******" onblur="yzPwd()" maxlength=16>
									<span id="pwdId"></span>
								</div><!-- /.form-box -->

								<div class="form-box">
									<label for="Phone-register">手机号</label>
									<input type="text" id="Phone-register" name="cmsPhone" placeholder="133****2253" onblur="yzPhone()">
									<span id="phoneId"></span>
								</div><!-- /.form-box -->

								<div class="form-inline">
									<label for="password-register" class="col-sm-2 control-label">验证码</label>
									<div class="col-sm-6">
										<input type="text" class="form-control" id="security-register" onblur="yzyzm()">
										<span id="securityId"></span>
									</div>
									<input class="btn btn-default" onclick="sendPhoneCode()" type="button" id="codeId" value="发送验证码">
								</div><!-- /.form-box -->

								<div class="form-box">
									<button type="button" class="login" onclick="registerVerify()">注册</button>
								</div><!-- /.form-box -->
							</form><!-- /#form-login -->
						</div><!-- /.form-login -->
					</div><!-- /.col-md-6 -->
				</div><!-- /.row -->
			</div><!-- /.container -->

<script>
	$(function(){
		$("#registerDiv").hide()
	})
	
	function loginCmsUser() {
		$.ajax({
			url:"../user/loginCms",
			type:"post",
			data:$("#loginForm").serialize(),
			success:function (data) {
				if(data==1){
					location.href="1";
				}else if (data==2){
					bootbox.alert({
						size: "small",
						title: "提示",
						message: "密码不正确"
					})
				}else{
					bootbox.alert({
						size: "small",
						title: "提示",
						message: "用户不存在"
					})
				}
			}
		})
	}
	function register(){
		$("#loginDiv").hide();
		$("#registerDiv").show();
	}

/*	var yzm='';
	function resendSecurity(){
		if(yzPhone()){
			$.ajax({
				url:"../user/noteHint",
				type:"post",
				async:false,
				data:{'cmsPhone':$("#Phone-register").val()},
				success:function(data){
					yzm=data;
				}
			})
		}
		return yzm;
	}*/

	function  yzName(){
		var regiserCmsName=$("#name-register").val();
		var re=/^\w+@[a-z0-9]+\.[a-z]{2,4}$/
		var reg=/^1[0-9]{10}$/;
		if(reg.test(regiserCmsName)||re.test(regiserCmsName)){
			return true;
		}
			$("#nameId").html("<font colr='red'>用户名不符合规则</font>")
			return false;
	}

	function yzPwd() {
		var pwd=$("#password-register").val();
		var reg=/^[0-9a-zA-Z]{8,16}$/;
		alert(pwd.length)
		if(reg.test(pwd)){
			if(8<pwd.length && pwd.length<11){
				alert(33333333)
				$("#pwdId").html("<font colr='red'>密码强度低</font>")
				return true;
			}
			$("#pwdId").html("")
			return true;
		}
			$("#pwdId").html("<font colr='red'>密码强度太低</font>")
			return false;
	}

	function yzPhone(){
		var phone=$("#Phone-register").val();
		var reg=/^1[0-9]{10}$/;
		if(reg.test(phone)){
			$("#phoneId").html("")
			return true;
		}
			$("#phoneId").html("<font color='red'>电话格式不对</font>")
			return false;
	}

	function  yzyzm(){
		var yz=$("#security-register").val();
		if(yz==yzm){
			return true;
		}
		$("#securityId").html("<font color='red'>验证码不正确</font>")
		return false;
	}
	function registerVerify() {

		if(yzName()&yzPhone()&yzPwd()&yzyzm()){
			alert($("#registerForm").serialize())
			$.ajax({
				url:"../user/registerCmsUser",
				type:"post",
				data:$("#registerForm").serialize(),
				success:function(data){
					alert(data)
					if(data==1){
						bootbox.alert({
							size: "small",
							title: "提示",
							message: "注册成功请登录"
						})
						location.href="index.html";
					}else{
						bootbox.alert({
							size: "small",
							title: "提示",
							message: "系统繁忙请稍后再试"
						})
					}
				}
			})
		}
	}

	var InterValObj; //timer变量，控制时间
	var count = 60; //间隔函数，1秒执行
	var curCount;//当前剩余秒数
	//发送手机验证码
	var yzm='';
	function sendPhoneCode(){
		curCount = count;
		//设置button效果，开始计时
		//$("#btnSendCode").attr("disabled", "true");
		$("#codeId").val(curCount + "秒后重新发送");
		$("#codeId").removeAttr("onclick");
		InterValObj = window.setInterval(SetRemainTime, 1000); //启动计时器，1秒执行一次
		if(yzPhone()){
			$.ajax({
				url:"../user/noteHint",
				type:"post",
				async:false,
				data:{'cmsPhone':$("#Phone-register").val()},
				success:function(data){
					yzm=data;
				}
			})
		}
		return yzm;
	}
	//timer处理函数
	function SetRemainTime() {
		if (curCount == 1) {
			window.clearInterval(InterValObj);//停止计时器
			//$("#btnSendCode").removeAttr("disabled");//启用按钮
			$("#codeId").attr("onclick","sendPhoneCode();");
			$("#codeId").val("免费获取");
		}
		else {
			curCount--;
			$("#codeId").val(curCount + "秒后重新发送");
		}
	}
</script>

</body>	
</html>